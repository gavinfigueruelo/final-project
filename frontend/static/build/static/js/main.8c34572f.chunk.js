(this.webpackJsonpstatic=this.webpackJsonpstatic||[]).push([[0],{44:function(e,t,a){},52:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(26),i=a.n(r),c=(a(52),a(53),a(5)),o=a.n(c),l=a(9),u=a(12),h=a(13),d=a(7),p=a(16),b=a(15),j=a(10),m=a(11),f=a.n(m),O=a(19),v=a(1),g=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={username:"",email:"",password:""},n.handleInput=n.handleInput.bind(Object(d.a)(n)),n.clickLogin=n.clickLogin.bind(Object(d.a)(n)),n.clickRegister=n.clickRegister.bind(Object(d.a)(n)),n}return Object(h.a)(a,[{key:"handleInput",value:function(e){this.setState(Object(O.a)({},e.target.name,e.target.value))}},{key:"clickLogin",value:function(){var e=this.state.clickLogin;!1===e?this.setState({clickLogin:!0}):!0===e&&this.setState({clickLogin:!1})}},{key:"clickRegister",value:function(){var e=this.state.clickRegister;!1===e?this.setState({clickRegister:!0}):!0===e&&this.setState({clickRegister:!1})}},{key:"render",value:function(){var e=this;return Object(v.jsx)("div",{class:"login_outer",children:Object(v.jsxs)("form",{className:"loginform mt-4 py-5",onSubmit:function(t){return e.props.handleLogin(t,e.state)},children:[Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{className:"login-label",htmlFor:"username-login",children:"Username"}),Object(v.jsx)("input",{name:"username",type:"text",id:"username-login",className:"form-control login-ctrl",value:this.state.username,placeholder:"username",onChange:this.handleInput})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{className:"login-label",htmlFor:"email-login",children:"Email address"}),Object(v.jsx)("input",{name:"email",type:"email",id:"email-login",className:"form-control login-ctrl",value:this.state.email,placeholder:"email",onChange:this.handleInput})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{className:"login-label",htmlFor:"password-login",children:"Password"}),Object(v.jsx)("input",{name:"password",type:"password",id:"password-login",className:"form-control login-ctrl",value:this.state.password,placeholder:"password",onChange:this.handleInput})]}),Object(v.jsx)("button",{className:"btn btn-light login-btn",type:"submit",children:"Login"})]})})}}]),a}(n.Component),x=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={username:"",email:"",password1:"",password2:""},n.handleInput=n.handleInput.bind(Object(d.a)(n)),n}return Object(h.a)(a,[{key:"handleInput",value:function(e){this.setState(Object(O.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return Object(v.jsx)("div",{class:"reg_out",children:Object(v.jsxs)("form",{className:"regform mt-4 py-5",onSubmit:function(t){return e.props.handleRegistration(t,e.state)},children:[Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{className:"login-label",htmlFor:"username",children:"Username"}),Object(v.jsx)("input",{className:"form-control login-ctrl",id:"username",type:"text",name:"username",value:this.state.username,placeholder:"username",onChange:this.handleInput})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{className:"login-label",htmlFor:"email",children:"Email address"}),Object(v.jsx)("input",{className:"form-control login-ctrl",id:"email",type:"email",name:"email",value:this.state.email,placeholder:"email",onChange:this.handleInput})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{className:"login-label",htmlFor:"password1",children:"Password"}),Object(v.jsx)("input",{className:"form-control login-ctrl",id:"password1",type:"password",name:"password1",value:this.state.password1,placeholder:"password",onChange:this.handleInput})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{className:"login-label",htmlFor:"password2",children:"Confirm Password"}),Object(v.jsx)("input",{className:"form-control login-ctrl",id:"password2",type:"password",name:"password2",value:this.state.password2,placeholder:"confirm password",onChange:this.handleInput})]}),Object(v.jsx)("button",{className:"btn btn-light reggie-btn",type:"submit",children:"Register"})]})})}}]),a}(n.Component),y=a(29),k=a(18),N=a(25),w=a(28),S=a(27),P=a(34),_=a(45),C=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={isEditing:!1,profile_picture:null,profilePreview:"",bio:"",profile:[],show:!1,common_name:"",family:"",publication_year:"",image:null,plantPreview:""},n.handleImage=n.handleImage.bind(Object(d.a)(n)),n.handleInput=n.handleInput.bind(Object(d.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(d.a)(n)),n.addPlant=n.addPlant.bind(Object(d.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/profiles/detail/");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,console.log("profile",a),this.setState(Object(_.a)({},a));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleImage",value:function(e){var t=this;if("profile-image"===e.target.name){var a=e.target.files[0];this.setState({profile_picture:a});var n=new FileReader;n.onloadend=function(){t.setState({profilePreview:n.result})},n.readAsDataURL(a)}else if("plant-image"===e.target.name){var s=e.target.files[0];this.setState({image:s});var r=new FileReader;r.onloadend=function(){t.setState({plantPreview:r.result})},r.readAsDataURL(s)}}},{key:"handleInput",value:function(e){this.setState(Object(O.a)({},e.target.name,e.target.value))}},{key:"handleEdit",value:function(e){13===e.keyCode&&this.setState({isEditing:!1})}},{key:"handleSubmit",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,s,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.state,(a=new FormData).append("profile_picture",this.state.profile_picture),a.append("bio",this.state.bio),n={method:"PUT",headers:{"X-CSRFToken":f.a.get("csrftoken")},body:a},e.next=8,fetch("/api/v1/profiles/update/",n);case 8:return s=e.sent,e.next=11,s.json().catch((function(e){return console.log(e)}));case 11:r=e.sent,console.log("updated profile",r),this.setState({isEditing:!this.state.isEditing,bio:r.bio,profile_picture:r.profile_picture});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addPlant",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a,n,s,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new FormData,0!==this.state.common_name.length&&t.append("common_name",this.state.common_name),0!==this.state.family.length&&t.append("family",this.state.family),null!==this.state.image&&t.append("image",this.state.image),0!==this.state.publication_year.length&&(a=Number(this.state.publication_year),t.append("publication_year",a)),n={method:"POST",headers:{"X-CSRFToken":f.a.get("csrftoken")},body:t},e.next=8,fetch("/api/v1/user/plants/",n);case 8:if(201!==(s=e.sent).status){e.next=15;break}return e.next=12,s.json();case 12:r=e.sent,this.props.addPlant(r),this.setState({common_name:"",family:"",image:null,publication_year:"",show:!1});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"card profile_edit",children:[this.state.isEditing?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"card edit-view",children:[Object(v.jsx)("input",{className:"form_edit_profile",onChange:this.handleImage,type:"file",name:"profile-image",onKeyUp:function(t){return e.handleEdit(t)}}),this.state.profile_picture&&Object(v.jsx)("img",{src:this.state.profilePreview}),Object(v.jsx)("p",{className:"profile_picture_edit",children:"Upload A Profile Picture"})]}),Object(v.jsxs)("div",{className:"bio_edit_view",children:[Object(v.jsx)("input",{className:"form-bio",onChange:this.handleInput,value:this.state.bio,name:"bio",onKeyUp:function(t){return e.handleEdit(t)}}),Object(v.jsx)("p",{children:"bio"}),Object(v.jsx)("button",{className:"btn btn-submit",type:"button",onClick:function(t){return e.handleSubmit(t)},children:"save"})]})]}):null,this.state.isEditing?null:Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:"prof-col",children:Object(v.jsxs)("div",{className:"text-center",children:[Object(v.jsx)("div",{className:"card-img-top top-pic",children:Object(v.jsx)("img",{className:"card-profile",src:this.state.profile_picture,alt:"defaultprofile.png"})}),Object(v.jsxs)("div",{className:"card-body d-flex flex-column",children:[Object(v.jsxs)("h1",{className:"card-title",children:[" ",this.state.username]}),Object(v.jsx)("p",{children:this.state.bio}),Object(v.jsxs)("div",{className:"profile-btns",children:[Object(v.jsx)("button",{className:"btn btn-light m-2 edit-prof-btn",type:"submit",onClick:function(){return e.setState({isEditing:!e.state.isEditing})},children:"Edit"}),Object(v.jsx)("button",{className:"btn btn-light m-2 add_plant_btn",type:"submit",onClick:function(){return e.setState({show:!0})},children:"Add Plant"})]}),Object(v.jsxs)(k.a,{show:this.state.show,onHide:function(){return e.setState({show:!1})},children:[Object(v.jsx)(k.a.Header,{closeButton:!0,children:Object(v.jsx)(k.a.Title,{children:"Add plant below"})}),Object(v.jsxs)(k.a.Body,{children:[Object(v.jsx)(w.a,{className:"mb-3",children:Object(v.jsx)(S.a,{placeholder:"Common Name",name:"common_name",onChange:this.handleInput,value:this.state.common_name})}),Object(v.jsx)(w.a,{className:"mb-3",children:Object(v.jsx)(S.a,{placeholder:"Family",name:"family",onChange:this.handleInput,value:this.state.family})}),Object(v.jsx)(w.a,{className:"mb-3",children:Object(v.jsx)(S.a,{placeholder:"Publication Year",name:"publication_year",onChange:this.handleInput,value:this.state.publiction_year})}),Object(v.jsxs)(w.a,{className:"mb-3",children:[this.state.image&&Object(v.jsx)("img",{src:this.state.plantPreview}),"3",Object(v.jsx)(P.a.File,{name:"plant-image",id:"exampleFormControlFile1",label:"Example file input",onChange:this.handleImage})]})]}),Object(v.jsxs)(k.a.Footer,{children:[Object(v.jsx)(N.a,{variant:"primary",onClick:this.addPlant,children:"Add plant!"}),Object(v.jsx)(N.a,{variant:"secondary",onClick:function(){return e.setState({show:!1})},children:"Cancel"})]})]})]})]},this.state.id)})})]})}}]),a}(n.Component),I=a(30),F=a(24),L=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={entry:n.props.note.entry,upload:null,isEditing:!1},n.editNote=n.editNote.bind(Object(d.a)(n)),n.handleInput=n.handleInput.bind(Object(d.a)(n)),n}return Object(h.a)(a,[{key:"editNote",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":f.a.get("csrftoken")},body:JSON.stringify({entry:this.state.entry})},e.next=3,fetch("/api/v1/user/plants/note/".concat(this.props.note.id,"/"),t);case 3:if(a=e.sent,console.log(a),!a.status){e.next=10;break}return e.next=8,a.json();case 8:e.sent,this.setState({isEditing:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleInput",value:function(e){this.setState(Object(O.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"d-flex align-items-baseline",children:[this.state.isEditing?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("textarea",{className:"mr-3",type:"text",name:"entry",value:this.state.entry,onChange:this.handleInput}),Object(v.jsx)(N.a,{className:"note-buttons ml-auto",variant:"secondary",onClick:this.editNote,children:Object(v.jsx)(I.a,{icon:F.d})})]}):Object(v.jsxs)(v.Fragment,{children:[this.state.entry&&Object(v.jsx)("p",{style:{"font-size":"25px","margin-right":"1rem"},children:this.state.entry}),Object(v.jsx)(N.a,{className:"note-buttons ml-auto",variant:"secondary",onClick:function(){return e.setState({isEditing:!0})},children:Object(v.jsx)(I.a,{icon:F.c})})]}),Object(v.jsx)(N.a,{className:"note-buttons",variant:"danger",onClick:function(){return e.props.removeNote(e.props.note.id)},children:Object(v.jsx)(I.a,{icon:F.e})})]}),this.props.note.upload&&Object(v.jsx)("img",{className:"mb-2",src:this.props.note.upload})]})}}]),a}(n.Component),T=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={show:!1,entry:"",upload:null,preview:"",showNotes:!1,id:n.props.plant.id,common_name:n.props.plant.common_name,image_url:n.props.plant.image_url,image:n.props.plant.image,family:n.props.plant.family,publication_year:n.props.plant.publication_year,notes:n.props.plant.notes||[]},n.handleInput=n.handleInput.bind(Object(d.a)(n)),n.handleImage=n.handleImage.bind(Object(d.a)(n)),n.addNote=n.addNote.bind(Object(d.a)(n)),n.removeNote=n.removeNote.bind(Object(d.a)(n)),n}return Object(h.a)(a,[{key:"handleInput",value:function(e){this.setState(Object(O.a)({},e.target.name,e.target.value))}},{key:"addNote",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a,n,s,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("plant",this.state.id),this.state.entry.length&&t.append("entry",this.state.entry),this.state.upload&&t.append("upload",this.state.upload),a={method:"POST",headers:{"X-CSRFToken":f.a.get("csrftoken")},body:t},e.next=7,fetch("/api/v1/user/plants/note/",a);case 7:if(201!==(n=e.sent).status){e.next=15;break}return e.next=11,n.json().catch((function(e){return console.log(e)}));case 11:s=e.sent,(r=Object(y.a)(this.state.notes)).push(s),this.setState({show:!1,entry:"",upload:null,preview:"",notes:r});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeNote",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"DELETE",headers:{"X-CSRFToken":f.a.get("csrftoken")}},e.next=3,fetch("/api/v1/user/plants/note/".concat(t,"/"),a);case 3:204===e.sent.status&&(n=Object(y.a)(this.state.notes),s=n.findIndex((function(e){return e.id===t})),n.splice(s,1),this.setState({show:!1,entry:"",upload:null,preview:"",notes:n}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleImage",value:function(e){var t=this,a=e.target.files[0];this.setState({upload:a});var n=new FileReader;n.onloadend=function(){t.setState({preview:n.result})},n.readAsDataURL(a)}},{key:"render",value:function(){var e=this,t=this.state.notes.map((function(t){return Object(v.jsx)(L,{note:t,removeNote:e.removeNote},t.id)}));return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"card plantprof",children:[this.state.image&&Object(v.jsx)("img",{className:"card-img-top",src:this.state.image,alt:"plant"}),!this.state.image&&this.state.image_url&&Object(v.jsx)("img",{className:"card-img-top",src:this.state.image_url,alt:"plant"}),Object(v.jsx)("h1",{className:"user-title p-2",children:this.state.common_name}),Object(v.jsx)("p",{className:"p-2",children:this.state.family}),Object(v.jsx)("p",{className:"p-2",children:this.state.publication_year}),Object(v.jsxs)("div",{className:"note-buttons",children:[Object(v.jsx)("button",{className:"btn btn-success note-btn",onClick:function(){return e.setState({show:!0})},children:Object(v.jsx)(I.a,{icon:F.b})}),Object(v.jsx)("button",{className:"btn btn-secondary note-btn",onClick:function(){return e.setState({showNotes:!0})},children:Object(v.jsx)(I.a,{icon:F.a})}),Object(v.jsx)("button",{className:"btn btn-danger note-btn",onClick:function(){return e.props.removePlant(e.state.id)},children:Object(v.jsx)(I.a,{icon:F.e})})]})]},this.state.id),Object(v.jsxs)(k.a,{show:this.state.show,onHide:function(){return e.setState({show:!1})},children:[Object(v.jsx)(k.a.Header,{closeButton:!0,children:Object(v.jsx)(k.a.Title,{children:"Add note below"})}),Object(v.jsxs)(k.a.Body,{children:[Object(v.jsx)(w.a,{className:"mb-3",children:Object(v.jsx)(S.a,{as:"textarea",rows:3,name:"entry",onChange:this.handleInput,value:this.state.entry})}),Object(v.jsxs)(w.a,{className:"mb-3",children:[this.state.upload&&Object(v.jsx)("img",{src:this.state.preview}),Object(v.jsx)(P.a.File,{id:"exampleFormControlFile1",label:"Example file input",onChange:this.handleImage})]})]}),Object(v.jsxs)(k.a.Footer,{children:[Object(v.jsx)(N.a,{variant:"primary",onClick:this.addNote,children:"Save Note!"}),Object(v.jsx)(N.a,{variant:"secondary",onClick:function(){return e.setState({show:!1})},children:"Cancel"})]})]}),Object(v.jsxs)(k.a,{show:this.state.showNotes,onHide:function(){return e.setState({showNotes:!1})},children:[Object(v.jsx)(k.a.Header,{closeButton:!0,children:Object(v.jsx)(k.a.Title,{children:this.state.common_name})}),Object(v.jsx)(k.a.Body,{children:t}),Object(v.jsx)(k.a.Footer,{children:Object(v.jsx)(N.a,{variant:"secondary",onClick:function(){return e.setState({showNotes:!1})},children:"Close"})})]})]})}}]),a}(n.Component),R=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={plants:[]},n.fetchPlants=n.fetchPlants.bind(Object(d.a)(n)),n.fetchNotes=n.fetchNotes.bind(Object(d.a)(n)),n.handleInput=n.handleInput.bind(Object(d.a)(n)),n.addPlant=n.addPlant.bind(Object(d.a)(n)),n.removePlant=n.removePlant.bind(Object(d.a)(n)),n}return Object(h.a)(a,[{key:"handleInput",value:function(e){this.setState(Object(O.a)({},e.target.name,e.target.value))}},{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.fetchPlants(),this.fetchNotes();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addPlant",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("plant",t),(a=Object(y.a)(this.state.plants)).push(t),this.setState({plants:a});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removePlant",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"DELETE",headers:{"X-CSRFToken":f.a.get("csrftoken")}},e.next=3,fetch("/api/v1/user/plants/".concat(t,"/"),a);case 3:204===e.sent.status&&(n=Object(y.a)(this.state.plants),s=n.findIndex((function(e){return e.id===t})),n.splice(s,1),this.setState({show:!1,entry:"",upload:null,preview:"",plants:n}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPlants",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/v1/user/plants/");case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,console.log("plants",a),this.setState({plants:a}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchNotes",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/v1/user/plants/note/");case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,console.log("notes",a),this.setState({notes:a}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"profile_container card-columns p-4",children:[Object(v.jsx)(C,{addPlant:this.addPlant}),this.state.plants.map((function(t){return Object(v.jsx)(T,{plant:t,addPlant:e.addPlant,removePlant:e.removePlant},t.id)}))]})}}]),a}(n.Component),E=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:"m-4",children:this.props.posts.map((function(t){return Object(v.jsxs)("div",{className:"card community-card mb-3",children:[t.image_upload&&Object(v.jsx)("img",{className:"community_picture_post",src:t.image_upload,alt:"plant"}),Object(v.jsxs)("div",{class:"card-body",children:[Object(v.jsx)("p",{class:"card-text",children:t.post}),Object(v.jsxs)("div",{className:"d-flex align-items-baseline",children:[Object(v.jsx)("span",{children:t.author}),t.is_author&&Object(v.jsx)("button",{className:"btn btn-link ml-auto",type:"button",onClick:function(){return e.props.removePost(t.id)},children:"Delete"})]})]})]},t.id)}))})})}}]),a}(n.Component),D=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={post:"",image_upload:null,preview:""},n.handleInput=n.handleInput.bind(Object(d.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(d.a)(n)),n.handleImage=n.handleImage.bind(Object(d.a)(n)),n}return Object(h.a)(a,[{key:"handleInput",value:function(e){this.setState(Object(O.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,s,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(a=new FormData).append("post",this.state.post),this.state.image_upload&&a.append("image_upload",this.state.image_upload),n={method:"POST",headers:{"X-CSRFToken":f.a.get("csrftoken")},body:a},e.next=7,fetch("/api/v1/community/",n);case 7:if(201!==(s=e.sent).status){e.next=14;break}return e.next=11,s.json();case 11:r=e.sent,this.props.addPost(r),this.setState({post:"",image_uplaod:null,preview:""});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleImage",value:function(e){var t=this,a=e.target.files[0];this.setState({image_upload:a});var n=new FileReader;n.onloadend=function(){t.setState({preview:n.result})},n.readAsDataURL(a)}},{key:"render",value:function(){return Object(v.jsx)("div",{className:"container_post",children:Object(v.jsx)("form",{className:"form_post",onSubmit:this.handleSubmit,children:Object(v.jsxs)("div",{className:"com_post",children:[Object(v.jsx)("label",{className:"post-info",htmlFor:"community-post",children:"Ask a Question, Share a Thought, or Post a Picture of Your Plant!"}),Object(v.jsx)("br",{}),this.state.image_upload&&Object(v.jsx)("img",{src:this.state.preview}),Object(v.jsx)("textarea",{rows:"3",columns:"10",name:"post",id:"community-post",value:this.state.post,onChange:this.handleInput,placeholder:"type message here",className:"message-input",required:!0}),Object(v.jsx)("input",{type:"file",className:"file_post",onChange:this.handleImage}),Object(v.jsx)("div",{className:"post-btn",children:Object(v.jsx)("button",{className:"btn btn-light",type:"submit",children:"Post!"})})]})})})}}]),a}(n.Component),A=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={posts:[]},n.addPost=n.addPost.bind(Object(d.a)(n)),n.removePost=n.removePost.bind(Object(d.a)(n)),n}return Object(h.a)(a,[{key:"addPost",value:function(e){var t=Object(y.a)(this.state.posts);t.unshift(e),this.setState({posts:t})}},{key:"removePost",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"DELETE",headers:{"X-CSRFToken":f.a.get("csrftoken")}},e.next=3,fetch("/api/v1/community/".concat(t,"/"),a);case 3:204===e.sent.status&&(n=Object(y.a)(this.state.posts),s=n.findIndex((function(e){return e.id===t})),n.splice(s,1),this.setState({posts:n}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/community/");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,this.setState({posts:a});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{className:"welcome",children:" Welcome to the Plant Community!"}),Object(v.jsx)(D,{addPost:this.addPost}),Object(v.jsx)(E,{posts:this.state.posts,removePost:this.removePost})]})}}]),a}(n.Component),U=a(46),X=a(20),B=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={serach:"",plants:[],page:"1"},n.fetchPlants=n.fetchPlants.bind(Object(d.a)(n)),n.addPlant=n.addPlant.bind(Object(d.a)(n)),n.searchPlants=n.searchPlants.bind(Object(d.a)(n)),n.handleInput=n.handleInput.bind(Object(d.a)(n)),n.handlePrev=n.handlePrev.bind(Object(d.a)(n)),n.handleNext=n.handleNext.bind(Object(d.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.fetchPlants()}},{key:"componentDidUpdate",value:function(e){if(this.props.location.search!==e.location.search)if(this.props.location.search.length){var t=U.parse(this.props.location.search).page;this.setState({page:t},this.fetchPlants)}else this.setState({page:"1"},this.fetchPlants)}},{key:"handleInput",value:function(e){this.setState(Object(O.a)({},e.target.name,e.target.value),this.searchPlants)}},{key:"searchPlants",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.search.trim().length){e.next=12;break}return e.next=3,fetch("/api/v1/plants/search/?q=".concat(this.state.search));case 3:if(200!==(t=e.sent).status){e.next=11;break}return e.next=7,t.json();case 7:a=e.sent,this.setState({plants:a.data}),e.next=12;break;case 11:this.fetchPlants();case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchPlants",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/plants/?page=".concat(this.state.page));case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,this.setState({plants:a.data});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleNext",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.plants.links.next){e.next=3;break}return e.abrupt("return");case 3:return t=this.state.plants.links.next,a=t.split("?")[1],e.next=7,fetch("/api/v1/plants?q=".concat(a));case 7:return n=e.sent,e.next=10,n.json();case 10:s=e.sent,console.log("search",s),this.setState({plants:s});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handlePrev",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.plants.links.prev){e.next=3;break}return e.abrupt("return");case 3:return t=this.state.plants.links.prev,a=t.split("?")[1],e.next=7,fetch("/api/v1/plants?q=".concat(a));case 7:return n=e.sent,e.next=10,n.json();case 10:s=e.sent,console.log("search",s),this.setState({plants:s});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addPlant",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={common_name:t.common_name,family:t.family_common_name,image_url:t.image_url,publication_year:t.year,api_id:t.id},n={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":f.a.get("csrftoken")},body:JSON.stringify(a)},e.next=4,fetch("/api/v1/user/plants/add/",n);case 4:s=e.sent,console.log(s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.plants.map((function(t){return Object(v.jsxs)("div",{className:"card",children:[Object(v.jsx)("div",{className:"plant-img_container",children:Object(v.jsx)("img",{src:t.image_url,className:"card-img-top",alt:t.common_name,onError:function(e){return e.target.style.display="none"}})}),Object(v.jsxs)("div",{className:"card-body d-flex flex-column",children:[Object(v.jsx)("h5",{className:"card-title",children:t.common_name}),Object(v.jsx)("p",{className:"card-text",children:t.family_common_name}),Object(v.jsx)("button",{type:"button",className:"btn btn-link ml-auto",onClick:function(){return e.addPlant(t)},children:"Add to profile"})]})]},t.id)}));return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"p-4",children:[Object(v.jsxs)("div",{className:"search_bar row d-flex mb-4 position-relative",children:[Object(v.jsx)("input",{type:"text",className:"searching form-control mr-sm-2 ml-3 position-absolute",name:"search",value:this.state.search,onChange:this.handleInput,placeholder:"Search"}),Object(v.jsxs)("div",{className:"d-flex ml-auto pag-btns",children:[Object(v.jsx)(X.b,{className:"nav-link ".concat("1"===this.state.page?"disabled":"display"),to:"/?page=".concat(Number(this.state.page)-1),children:"Prev"}),Object(v.jsx)(X.b,{className:"nav-link ".concat("18879"===this.state.page?"disabled":"display"),to:"/?page=".concat(Number(this.state.page)+1),children:"Next"})]})]}),Object(v.jsx)("div",{className:"card-columns plant-col",children:t})]})})}}]),a}(n.Component),H=Object(j.f)(B);a(44);function J(e){return Object(v.jsx)("div",{className:"header_nav",children:Object(v.jsxs)("ul",{className:"nav-bar",children:[Object(v.jsx)("li",{className:"nav-bar-name",children:Object(v.jsx)(X.b,{className:"nav-link navbar-brand",to:"/",children:"Henry "})}),Object(v.jsxs)("span",{children:[Object(v.jsx)("li",{className:"nav-bar-left",children:Object(v.jsx)(X.b,{to:"/login/",children:"Login "})}),Object(v.jsxs)("li",{className:"nav-bar-left",children:[Object(v.jsx)(X.b,{to:"/register/",children:"Register "})," "]})]})]})})}function z(e){return Object(v.jsx)("div",{className:"header_nav",children:Object(v.jsxs)("ul",{className:"nav-bar",children:[Object(v.jsx)("li",{className:"nav-bar-name",children:Object(v.jsx)(X.b,{to:"/",children:"Henry "})}),Object(v.jsxs)("li",{className:"nav-bar-right",children:[Object(v.jsx)(X.b,{to:"/profile/",children:"Profile "})," "]}),Object(v.jsxs)("li",{className:"nav-bar-right",children:[Object(v.jsx)(X.b,{to:"/community/",children:"Community "})," "]}),Object(v.jsx)("button",{className:"btn btn-light logout-btn",onClick:function(t){return e.handleLogOut(t)},type:"button",children:"Logout"})]})})}var M=function(e){return e.isLoggedIn?Object(v.jsx)(z,{handleLogOut:e.handleLogOut}):Object(v.jsx)(J,{})},q=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={isLoggedIn:!!f.a.get("Authorization")},n.handleRegistration=n.handleRegistration.bind(Object(d.a)(n)),n.handleLogin=n.handleLogin.bind(Object(d.a)(n)),n.handleLogOut=n.handleLogOut.bind(Object(d.a)(n)),n}return Object(h.a)(a,[{key:"handleLogin",value:function(){var e=Object(l.a)(o.a.mark((function e(t,a){var n,s,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":f.a.get("csrftoken")},body:JSON.stringify(a)},s=function(e){return console.warn(e)},e.next=5,fetch("/rest-auth/login/",n).catch(s);case 5:return r=e.sent,e.next=8,r.json().catch(s);case 8:(i=e.sent).key&&(f.a.set("Authorization","Token ".concat(i.key)),this.setState({isLoggedIn:!0}),this.props.history.push("/"));case 10:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleRegistration",value:function(){var e=Object(l.a)(o.a.mark((function e(t,a){var n,s,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":f.a.get("csrftoken")},body:JSON.stringify(a)},s=function(e){return console.warn(e)},e.next=5,fetch("/rest-auth/registration/",n).catch(s);case 5:return r=e.sent,e.next=8,r.json().catch(s);case 8:(i=e.sent).key&&(f.a.set("Authorization","Token ".concat(i.key)),this.setState({isLoggedIn:!0}),this.props.history.push("/"));case 10:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleLogOut",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":f.a.get("csrftoken")}},n=function(e){return console.warn(e)},e.next=5,fetch("/rest-auth/logout/",a).catch(n);case 5:e.sent.ok&&(f.a.remove("Authorization"),this.setState({isLoggedIn:!1}),this.props.history.push("/login/"));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(v.jsxs)(s.a.Fragment,{children:[Object(v.jsx)(M,{isLoggedIn:this.state.isLoggedIn,handleLogOut:this.handleLogOut}),Object(v.jsxs)(j.c,{children:[Object(v.jsx)(j.a,{path:"/login",children:Object(v.jsx)(g,{handleLogin:this.handleLogin})}),Object(v.jsx)(j.a,{path:"/register",children:Object(v.jsx)(x,{handleRegistration:this.handleRegistration})}),Object(v.jsx)(j.a,{path:"/profile",children:Object(v.jsx)(R,{})}),Object(v.jsx)(j.a,{path:"/community",children:Object(v.jsx)(A,{})}),Object(v.jsx)(j.a,{exact:!0,path:"/",children:Object(v.jsx)(H,{})})]})]})}}]),a}(n.Component),K=Object(j.f)(q),Y=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,79)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),s(e),r(e),i(e)}))};i.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(X.a,{children:Object(v.jsx)(K,{})})}),document.getElementById("root")),Y()}},[[77,1,2]]]);
//# sourceMappingURL=main.8c34572f.chunk.js.map